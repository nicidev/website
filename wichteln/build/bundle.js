var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function i(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t,n,s){if(e){const i=o(e,t,n,s);return e[0](i)}}function o(e,t,n,s){return e[1]&&s?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](s(t))):n.ctx}function c(e,t,n,s,i,r,l){const c=function(e,t,n,s){if(e[2]&&s){const i=e[2](s(n));if(void 0===t.dirty)return i;if("object"==typeof i){const e=[],n=Math.max(t.dirty.length,i.length);for(let s=0;s<n;s+=1)e[s]=t.dirty[s]|i[s];return e}return t.dirty|i}return t.dirty}(t,s,i,r);if(c){const i=o(t,n,s,l);e.p(i,c)}}function u(e){return null==e?"":e}function a(e,t){e.appendChild(t)}function d(e,t,n){e.insertBefore(t,n||null)}function f(e){e.parentNode.removeChild(e)}function h(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function g(){return p(" ")}function $(){return p("")}function E(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function b(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function N(e,t){e.value=null==t?"":t}function y(e,t,n){e.classList[n?"add":"remove"](t)}let O;function R(e){O=e}function _(){const e=function(){if(!O)throw new Error("Function called outside component initialization");return O}();return(t,n)=>{const s=e.$$.callbacks[t];if(s){const i=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);s.slice().forEach((t=>{t.call(e,i)}))}}}function C(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e(t)))}const w=[],x=[],D=[],T=[],L=Promise.resolve();let S=!1;function k(e){D.push(e)}let I=!1;const A=new Set;function U(){if(!I){I=!0;do{for(let e=0;e<w.length;e+=1){const t=w[e];R(t),M(t.$$)}for(R(null),w.length=0;x.length;)x.pop()();for(let e=0;e<D.length;e+=1){const t=D[e];A.has(t)||(A.add(t),t())}D.length=0}while(w.length);for(;T.length;)T.pop()();S=!1,I=!1,A.clear()}}function M(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(k)}}const j=new Set;let q;function K(){q={r:0,c:[],p:q}}function W(){q.r||s(q.c),q=q.p}function z(e,t){e&&e.i&&(j.delete(e),e.i(t))}function F(e,t,n,s){if(e&&e.o){if(j.has(e))return;j.add(e),q.c.push((()=>{j.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}}function H(e){e&&e.c()}function P(e,n,r){const{fragment:l,on_mount:o,on_destroy:c,after_update:u}=e.$$;l&&l.m(n,r),k((()=>{const n=o.map(t).filter(i);c?c.push(...n):s(n),e.$$.on_mount=[]})),u.forEach(k)}function V(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function J(e,t){-1===e.$$.dirty[0]&&(w.push(e),S||(S=!0,L.then(U)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function B(t,i,r,l,o,c,u=[-1]){const a=O;R(t);const d=i.props||{},h=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let m=!1;if(h.ctx=r?r(t,d,((e,n,...s)=>{const i=s.length?s[0]:n;return h.ctx&&o(h.ctx[e],h.ctx[e]=i)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](i),m&&J(t,e)),n})):[],h.update(),m=!0,s(h.before_update),h.fragment=!!l&&l(h.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);h.fragment&&h.fragment.l(e),e.forEach(f)}else h.fragment&&h.fragment.c();i.intro&&z(t.$$.fragment),P(t,i.target,i.anchor),U()}R(a)}class G{$destroy(){V(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}class Y{static listeners={};static logEvents=!0;static listen(e,t){"function"==typeof t&&(void 0===this.listeners[e]&&(this.listeners[e]=[]),this.listeners[e].push(t))}static trigger(e,t){"object"!=typeof t&&(t={value:t}),this.logEvents&&(console.log("EventHub >> "+String(e)),console.log(t));for(let n of this.listeners[e]||[])try{n(Object.assign({},t))}catch(t){console.log("Error while handling event "+String(e)),console.log(t)}}}const Z=Object.freeze({DICE_INFO:Symbol("dice-info"),ROLL_DICE:Symbol("roll-dice")}),Q=Object.freeze({ROOM_ENTERED:Symbol("room-entered"),ROOM_USER_JOIN:Symbol("room-usr-join"),ROOM_USER_LEAVE:Symbol("room-user-leave")}),X=Object.freeze({NETWORK_CONNECTING:Symbol("network-connecting"),NETWORK_CONNECTED:Symbol("network-connected"),NETWORK_UNAVAILABLE:Symbol("network-unavailable"),NETWORK_FAILED:Symbol("network-failed"),NETWORK_DISCONNECTED:Symbol("network-disconnected")});function ee(e){let t=String(e);return 0===t.indexOf("Symbol(")&&(t=t.substr(7,t.length-8)),t}class te{pusherLibrary="https://js.pusher.com/7.0/pusher.min.js";client=null;channel=null;settings={authEndpoint:"",appKey:"",appCluster:"eu"};constructor(e){for(let t in this.settings)this.settings[t]=e[t]??this.settings[t];this.injectPusher()}injectPusher(){let e=document.createElement("script");e.src=this.pusherLibrary,document.head.append(e)}initialize(e){window.Pusher&&(this.client=new Pusher(this.settings.appKey,{cluster:this.settings.appCluster,authEndpoint:this.settings.authEndpoint,auth:{params:{name:e}}}),this.client.connection.bind("error",this.handleConnectionError.bind(this)),this.client.connection.bind("state_change",this.handleConnectionStateChange.bind(this)))}connect(e,t){this.disconnect(),this.initialize(t),e=("presence-"+e).toLowerCase().replace(/[^a-z0-9-_]/g,""),this.channel=this.client.subscribe(e),this.channel.bind("pusher:subscription_succeeded",(e=>{Y.trigger(Q.ROOM_ENTERED,e)})),this.channel.bind("pusher:subscription_error",(t=>{Y.trigger(X.NETWORK_FAILED),this.log("subscription error on "+e,t)})),this.channel.bind("pusher:member_added",(e=>{Y.trigger(Q.ROOM_USER_JOIN,e)})),this.channel.bind("pusher:member_removed",(e=>{Y.trigger(Q.ROOM_USER_LEAVE,e)}));for(let e in Z){let t="client-"+ee(Z[e]);this.channel.bind(t,(e=>(t,n)=>{t.sender=n.user_id,Y.trigger(e,t)})(Z[e])),this.log("subscribed to "+t)}return e}disconnect(){this.channel&&(this.channel.unsubscribe(),this.channel.disconnect(),this.channel=null),this.client&&this.client.disconnect()}send(e,t,n){if(!this.channel||!this.channel.subscribed)return;let s=ee(e);0!==s.indexOf("client-")&&(s="client-"+s),this.channel.trigger(s,t),n&&(t.sender=n,Y.trigger(e,t))}handleConnectionStateChange(e){switch(this.log("connection state change",e),e.current){case"connecting":Y.trigger(X.NETWORK_CONNECTING);break;case"connected":Y.trigger(X.NETWORK_CONNECTED);break;case"disconnected":Y.trigger(X.NETWORK_DISCONNECTED),this.channel=null;break;case"failed":Y.trigger(X.NETWORK_FAILED),this.channel=null;break;case"unavailable":Y.trigger(X.NETWORK_UNAVAILABLE),this.channel=null}}handleConnectionError(e){this.log("error",e),4004===e.error.data.code&&this.log("connection limit reached"),Y.trigger(X.NETWORK_FAILED)}log(e,t){console.log("pusher >> "+e),t&&console.log(t)}}class ne{room="";self={id:0,info:{},firstUser:!1};users={};userlist=[];dices=[];rolls=[];status=se.SETUP;network=null;constructor(e){this.setupListeners(),this.network=new te(e.network||{}),this.status=se.READY,this.updated()}joinRoom(e,t){this.room=this.network.connect(e,t)}leaveRoom(){this.network.disconnect()}roll(e){if(e=e||0,this.dices[e]===this.self.id){let t=Math.floor(6*Math.random())+1,n=0;for(;n<this.userlist.length&&this.userlist[n].id!==this.self.id;n++);return n++,n>=this.userlist.length&&(n=0),this.network.send(Z.ROLL_DICE,{dice:e,eyes:t,next:this.userlist[n].id},this.self.id),t}return 0}addDice(){return this.dices.push(this.self.id),this.sendDiceInfo(),this.updated(),this.self.id}canRoll(){let e=[];for(let t=0;t<this.dices.length;t++)this.dices[t]===this.self.id&&e.push(t);return e}sendDiceInfo(){this.network.send(Z.DICE_INFO,{dices:this.dices.slice()})}updateUserList(){this.userlist.length=0;for(let e in this.users)this.userlist.push(this.users[e]);this.userlist.sort(((e,t)=>e.id>t.id?1:e.id<t.id?-1:0)),this.updated()}updated(){document.body.dispatchEvent(new Event("dice-pusher-updated"))}setupListeners(){window.addEventListener("beforeunload",(()=>(this.leaveRoom(),null))),Y.listen(X.NETWORK_CONNECTED,(()=>{this.status=se.CONNECTING,this.updated()})),Y.listen(X.NETWORK_DISCONNECTED,(()=>{this.status=se.READY,this.updated()})),Y.listen(X.NETWORK_FAILED,(()=>{this.status=se.ERROR,this.updated()})),Y.listen(X.NETWORK_UNAVAILABLE,(()=>{this.status=se.ERROR,this.updated()})),Y.listen(Q.ROOM_ENTERED,(e=>{if(this.status=se.CONNECTED,e.me&&(this.self=e.me),e.members){this.users={};for(let t in e.members)this.users[t]=e.members[t]||{},this.users[t].id=t}this.updateUserList(),1===this.userlist.length&&(this.self.firstUser=!0,this.dices=[this.self.id]),this.forwardEvent(Q.ROOM_ENTERED,this.users)})),Y.listen(Q.ROOM_USER_JOIN,(e=>{this.users[e.id]=e.info,this.users[e.id].id=e.id,this.self.id===this.userlist[0].id&&this.sendDiceInfo(),this.updateUserList(),this.forwardEvent(Q.ROOM_USER_JOIN,this.users)})),Y.listen(Q.ROOM_USER_LEAVE,(e=>{delete this.users[e.id],1===this.userlist.length&&(this.firstUser=!0),this.updateUserList(),this.forwardEvent(Q.ROOM_USER_LEAVE,this.users)})),Y.listen(Z.DICE_INFO,(e=>{this.dices=e.dices.slice(),this.updated(),this.forwardEvent(Z.DICE_INFO,e)})),Y.listen(Z.ROLL_DICE,(e=>{this.rolls.push(e),this.dices[e.dice]=e.next,this.updated(),this.forwardEvent(Z.ROLL_DICE,e)}))}forwardEvent(e,t){document.body&&document.body.dispatchEvent(new Event(ee(e),t))}}const se=Object.freeze({SETUP:Symbol("setup"),READY:Symbol("ready"),CONNECTING:Symbol("connecting"),CONNECTED:Symbol("connected"),ERROR:Symbol("error")});function ie(e){let t,n;const s=e[3].default,i=l(s,e,e[2],null);return{c(){t=m("div"),i&&i.c(),b(t,"class","card svelte-tbjk5t"),y(t,"inactive",e[0])},m(e,s){d(e,t,s),i&&i.m(t,null),n=!0},p(e,[n]){i&&i.p&&4&n&&c(i,s,e,e[2],n,null,null),1&n&&y(t,"inactive",e[0])},i(e){n||(z(i,e),n=!0)},o(e){F(i,e),n=!1},d(e){e&&f(t),i&&i.d(e)}}}function re(e,t,n){let s,{$$slots:i={},$$scope:r}=t,{inactive:l=!1}=t;return e.$$set=e=>{"inactive"in e&&n(1,l=e.inactive),"$$scope"in e&&n(2,r=e.$$scope)},e.$$.update=()=>{2&e.$$.dirty&&n(0,s=l)},[s,l,r,i]}class le extends G{constructor(e){super(),B(this,e,re,ie,r,{inactive:1})}}function oe(t){let n;return{c(){n=m("header"),n.innerHTML='<img src="img/cody.png" alt="Cody rolls" class="svelte-txuxrt"/> \n\n    <h1 class="svelte-txuxrt">Let&#39;s roll together!</h1>',b(n,"class","svelte-txuxrt")},m(e,t){d(e,n,t)},p:e,i:e,o:e,d(e){e&&f(n)}}}class ce extends G{constructor(e){super(),B(this,e,null,oe,r,{})}}function ue(t){let n;return{c(){n=m("footer"),n.innerHTML='<div class="copyright svelte-7gpmal">Nicole Heinze - 2020</div>',b(n,"class","svelte-7gpmal")},m(e,t){d(e,n,t)},p:e,i:e,o:e,d(e){e&&f(n)}}}class ae extends G{constructor(e){super(),B(this,e,null,ue,r,{})}}function de(t){let n;return{c(){n=m("div"),n.textContent="An Error Occured"},m(e,t){d(e,n,t)},p:e,i:e,o:e,d(e){e&&f(n)}}}class fe extends G{constructor(e){super(),B(this,e,null,de,r,{})}}function he(t){let n;return{c(){n=m("div"),n.textContent="Setting up..."},m(e,t){d(e,n,t)},p:e,i:e,o:e,d(e){e&&f(n)}}}class me extends G{constructor(e){super(),B(this,e,null,he,r,{})}}function pe(e){let t,n,s,i,r;const o=e[4].default,a=l(o,e,e[3],null);return{c(){t=m("button"),a&&a.c(),b(t,"class",n=u(e[0])+" svelte-13uk50i"),y(t,"flat",e[1]),y(t,"inverse",e[2])},m(n,l){d(n,t,l),a&&a.m(t,null),s=!0,i||(r=E(t,"click",e[5]),i=!0)},p(e,[i]){a&&a.p&&8&i&&c(a,o,e,e[3],i,null,null),(!s||1&i&&n!==(n=u(e[0])+" svelte-13uk50i"))&&b(t,"class",n),3&i&&y(t,"flat",e[1]),5&i&&y(t,"inverse",e[2])},i(e){s||(z(a,e),s=!0)},o(e){F(a,e),s=!1},d(e){e&&f(t),a&&a.d(e),i=!1,r()}}}function ge(e,t,n){let{$$slots:s={},$$scope:i}=t,{type:r="primary"}=t,{flat:l=!0}=t,{inverse:o=!1}=t;return e.$$set=e=>{"type"in e&&n(0,r=e.type),"flat"in e&&n(1,l=e.flat),"inverse"in e&&n(2,o=e.inverse),"$$scope"in e&&n(3,i=e.$$scope)},[r,l,o,i,s,function(t){C(e,t)}]}class $e extends G{constructor(e){super(),B(this,e,ge,pe,r,{type:0,flat:1,inverse:2})}}function Ee(e){let t;return{c(){t=p("Tritt ein")},m(e,n){d(e,t,n)},d(e){e&&f(t)}}}function be(e){let t,n,i,r,l,o,c,u,h,$,y,O,R,_,C,w,x,D,T,L,S,k,I,A,U;return k=new $e({props:{type:"secondary",$$slots:{default:[Ee]},$$scope:{ctx:e}}}),{c(){t=m("h3"),t.textContent="Willkommen beim Accso Wichtelgewusel",n=g(),i=m("div"),r=m("form"),l=m("div"),o=m("label"),o.textContent="Raum",c=g(),u=m("input"),h=g(),$=m("div"),y=p(e[1]),O=g(),R=m("label"),R.textContent="Dein Name",_=g(),C=m("input"),w=g(),x=m("div"),D=p(e[2]),T=g(),L=m("br"),S=g(),H(k.$$.fragment),b(o,"for","room-id"),b(o,"class","svelte-l9wtqe"),b(u,"type","text"),b(u,"placeholder","Fancy-room-name"),b(u,"class","svelte-l9wtqe"),b($,"class","error svelte-l9wtqe"),b(R,"for","room-id"),b(R,"class","svelte-l9wtqe"),b(C,"type","text"),b(C,"placeholder","Dicey McDiceface"),b(C,"class","svelte-l9wtqe"),b(x,"class","error svelte-l9wtqe"),b(l,"class","join")},m(s,f){var m;d(s,t,f),d(s,n,f),d(s,i,f),a(i,r),a(r,l),a(l,o),a(l,c),a(l,u),N(u,e[0].roomName),a(l,h),a(l,$),a($,y),a(l,O),a(l,R),a(l,_),a(l,C),N(C,e[0].playerName),a(l,w),a(l,x),a(x,D),a(l,T),a(l,L),a(l,S),P(k,l,null),I=!0,A||(U=[E(u,"input",e[5]),E(C,"input",e[6]),E(r,"submit",(m=e[3],function(e){return e.preventDefault(),m.call(this,e)})),E(i,"submit",e[4])],A=!0)},p(e,[t]){1&t&&u.value!==e[0].roomName&&N(u,e[0].roomName),(!I||2&t)&&v(y,e[1]),1&t&&C.value!==e[0].playerName&&N(C,e[0].playerName),(!I||4&t)&&v(D,e[2]);const n={};512&t&&(n.$$scope={dirty:t,ctx:e}),k.$set(n)},i(e){I||(z(k.$$.fragment,e),I=!0)},o(e){F(k.$$.fragment,e),I=!1},d(e){e&&f(t),e&&f(n),e&&f(i),V(k),A=!1,s(U)}}}function ve(e,t,n){let s=_(),{credentials:i={roomName:"",playerName:""}}=t,r="",l="",o=!1;return e.$$set=e=>{"credentials"in e&&n(0,i=e.credentials)},[i,r,l,()=>{o=!0,i.roomName.trim().length<3&&(n(1,r="Der Raum name ist zu kurz..."),o=!1),i.playerName.trim().length<1&&(n(2,l="Hast du keinen Namen?"),o=!1),i.playerName.trim().length>10&&(n(2,l="Uhh... der Name ist ein bisschen zu lang (mehr als 10 Zeichen)"),o=!1),o&&(n(1,r=""),s("joinRoom",i))},function(t){C(e,t)},function(){i.roomName=this.value,n(0,i)},function(){i.playerName=this.value,n(0,i)}]}class Ne extends G{constructor(e){super(),B(this,e,ve,be,r,{credentials:0})}}function ye(e,t,n){const s=e.slice();return s[13]=t[n],s}function Oe(e,t,n){const s=e.slice();return s[16]=t[n],s}function Re(e,t,n){const s=e.slice();return s[16]=t[n],s}function _e(e,t,n){const s=e.slice();return s[21]=t[n],s}function Ce(e){let t,n,s,i;return t=new $e({props:{$$slots:{default:[we]},$$scope:{ctx:e}}}),t.$on("click",e[7]),{c(){H(t.$$.fragment),n=g(),s=m("br")},m(e,r){P(t,e,r),d(e,n,r),d(e,s,r),i=!0},p(e,n){const s={};16777216&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){i||(z(t.$$.fragment,e),i=!0)},o(e){F(t.$$.fragment,e),i=!1},d(e){V(t,e),e&&f(n),e&&f(s)}}}function we(e){let t;return{c(){t=p("Add Dice")},m(e,n){d(e,t,n)},d(e){e&&f(t)}}}function xe(e){let t,n,s=e[0].room+"";return{c(){t=p("Room "),n=p(s)},m(e,s){d(e,t,s),d(e,n,s)},p(e,t){1&t&&s!==(s=e[0].room+"")&&v(n,s)},d(e){e&&f(t),e&&f(n)}}}function De(e){let t,n,s,i,r=e[21].message+"";return{c(){t=m("span"),n=p(r),s=g(),b(t,"class",i=u(e[21].style)+" svelte-1ql1f5i")},m(e,i){d(e,t,i),a(t,n),a(t,s)},p(e,s){16&s&&r!==(r=e[21].message+"")&&v(n,r),16&s&&i!==(i=u(e[21].style)+" svelte-1ql1f5i")&&b(t,"class",i)},d(e){e&&f(t)}}}function Te(e){let t,n,s,i,r,l,o,c,u,p=e[5],$=[];for(let t=0;t<p.length;t+=1)$[t]=je(Re(e,p,t));const E=e=>F($[e],1,1,(()=>{$[e]=null}));let b=e[0].userlist,v=[];for(let t=0;t<b.length;t+=1)v[t]=Fe(ye(e,b,t));return{c(){t=m("div");for(let e=0;e<$.length;e+=1)$[e].c();n=g(),s=m("div"),i=m("br"),r=g(),l=m("b"),l.textContent="Spieler:innen",o=m("br"),c=g();for(let e=0;e<v.length;e+=1)v[e].c()},m(e,f){d(e,t,f);for(let e=0;e<$.length;e+=1)$[e].m(t,null);d(e,n,f),d(e,s,f),a(s,i),a(s,r),a(s,l),a(s,o),a(s,c);for(let e=0;e<v.length;e+=1)v[e].m(s,null);u=!0},p(e,n){if(300&n){let s;for(p=e[5],s=0;s<p.length;s+=1){const i=Re(e,p,s);$[s]?($[s].p(i,n),z($[s],1)):($[s]=je(i),$[s].c(),z($[s],1),$[s].m(t,null))}for(K(),s=p.length;s<$.length;s+=1)E(s);W()}if(35&n){let t;for(b=e[0].userlist,t=0;t<b.length;t+=1){const i=ye(e,b,t);v[t]?v[t].p(i,n):(v[t]=Fe(i),v[t].c(),v[t].m(s,null))}for(;t<v.length;t+=1)v[t].d(1);v.length=b.length}},i(e){if(!u){for(let e=0;e<p.length;e+=1)z($[e]);u=!0}},o(e){$=$.filter(Boolean);for(let e=0;e<$.length;e+=1)F($[e]);u=!1},d(e){e&&f(t),h($,e),e&&f(n),e&&f(s),h(v,e)}}}function Le(t){let n,s;return n=new Ne({}),n.$on("joinRoom",t[6]),{c(){H(n.$$.fragment)},m(e,t){P(n,e,t),s=!0},p:e,i(e){s||(z(n.$$.fragment,e),s=!0)},o(e){F(n.$$.fragment,e),s=!1},d(e){V(n,e)}}}function Se(t){let n,s;return n=new fe({}),{c(){H(n.$$.fragment)},m(e,t){P(n,e,t),s=!0},p:e,i(e){s||(z(n.$$.fragment,e),s=!0)},o(e){F(n.$$.fragment,e),s=!1},d(e){V(n,e)}}}function ke(t){let n,s;return n=new me({}),{c(){H(n.$$.fragment)},m(e,t){P(n,e,t),s=!0},p:e,i(e){s||(z(n.$$.fragment,e),s=!0)},o(e){F(n.$$.fragment,e),s=!1},d(e){V(n,e)}}}function Ie(e){let t,n;return t=new le({props:{inactive:e[3][e[16].id],$$slots:{default:[Me]},$$scope:{ctx:e}}}),{c(){H(t.$$.fragment)},m(e,s){P(t,e,s),n=!0},p(e,n){const s={};40&n&&(s.inactive=e[3][e[16].id]),16777252&n&&(s.$$scope={dirty:n,ctx:e}),t.$set(s)},i(e){n||(z(t.$$.fragment,e),n=!0)},o(e){F(t.$$.fragment,e),n=!1},d(e){V(t,e)}}}function Ae(e){let t,n,s,i,r,l,o,c=e[16].user.name+"";return{c(){t=m("p"),n=p(c),s=m("br"),i=p("ist dran."),r=g(),l=m("img"),l.src!==(o="img/"+(e[2][e[16].id]||1)+".gif?"+e[16].user.id)&&b(l,"src",o),b(l,"alt","Dice")},m(e,o){d(e,t,o),a(t,n),a(t,s),a(t,i),d(e,r,o),d(e,l,o)},p(e,t){32&t&&c!==(c=e[16].user.name+"")&&v(n,c),36&t&&l.src!==(o="img/"+(e[2][e[16].id]||1)+".gif?"+e[16].user.id)&&b(l,"src",o)},d(e){e&&f(t),e&&f(r),e&&f(l)}}}function Ue(e){let t,n,s,i,r,l;function o(){return e[9](e[16])}return{c(){t=m("p"),t.innerHTML="<b>Du<br/>bist dran!</b>",n=g(),s=m("img"),s.src!==(i="img/"+(e[2][e[16].id]||1)+".gif?"+e[16].user.id)&&b(s,"src",i),b(s,"alt","Dice")},m(e,i){d(e,t,i),d(e,n,i),d(e,s,i),r||(l=E(s,"click",o),r=!0)},p(t,n){e=t,36&n&&s.src!==(i="img/"+(e[2][e[16].id]||1)+".gif?"+e[16].user.id)&&b(s,"src",i)},d(e){e&&f(t),e&&f(n),e&&f(s),r=!1,l()}}}function Me(e){let t,n;function s(e,t){return e[16].yourTurn?Ue:Ae}let i=s(e),r=i(e);return{c(){t=m("div"),r.c(),n=g(),b(t,"class","diespace svelte-1ql1f5i")},m(e,s){d(e,t,s),r.m(t,null),d(e,n,s)},p(e,n){i===(i=s(e))&&r?r.p(e,n):(r.d(1),r=i(e),r&&(r.c(),r.m(t,null)))},d(e){e&&f(t),r.d(),e&&f(n)}}}function je(e){let t,n,s=e[16].user&&Ie(e);return{c(){s&&s.c(),t=$()},m(e,i){s&&s.m(e,i),d(e,t,i),n=!0},p(e,n){e[16].user?s?(s.p(e,n),32&n&&z(s,1)):(s=Ie(e),s.c(),z(s,1),s.m(t.parentNode,t)):s&&(K(),F(s,1,1,(()=>{s=null})),W())},i(e){n||(z(s),n=!0)},o(e){F(s),n=!1},d(e){s&&s.d(e),e&&f(t)}}}function qe(e){let t,n,s,i,r=e[13].name+"",l=e[5],o=[];for(let t=0;t<l.length;t+=1)o[t]=ze(Oe(e,l,t));return{c(){t=p(r),n=g();for(let e=0;e<o.length;e+=1)o[e].c();s=g(),i=m("br")},m(e,r){d(e,t,r),d(e,n,r);for(let t=0;t<o.length;t+=1)o[t].m(e,r);d(e,s,r),d(e,i,r)},p(e,n){if(1&n&&r!==(r=e[13].name+"")&&v(t,r),33&n){let t;for(l=e[5],t=0;t<l.length;t+=1){const i=Oe(e,l,t);o[t]?o[t].p(i,n):(o[t]=ze(i),o[t].c(),o[t].m(s.parentNode,s))}for(;t<o.length;t+=1)o[t].d(1);o.length=l.length}},d(e){e&&f(t),e&&f(n),h(o,e),e&&f(s),e&&f(i)}}}function Ke(e){let t,n=e[16].user.id===e[13].id&&We();return{c(){n&&n.c(),t=$()},m(e,s){n&&n.m(e,s),d(e,t,s)},p(e,s){e[16].user.id===e[13].id?n||(n=We(),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&f(t)}}}function We(e){let t;return{c(){t=p("🎲")},m(e,n){d(e,t,n)},d(e){e&&f(t)}}}function ze(e){let t,n=e[16].user&&Ke(e);return{c(){n&&n.c(),t=$()},m(e,s){n&&n.m(e,s),d(e,t,s)},p(e,s){e[16].user?n?n.p(e,s):(n=Ke(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&f(t)}}}function Fe(e){let t,n=-1===e[1].indexOf(e[13].id),s=n&&qe(e);return{c(){s&&s.c(),t=$()},m(e,n){s&&s.m(e,n),d(e,t,n)},p(e,i){3&i&&(n=-1===e[1].indexOf(e[13].id)),n?s?s.p(e,i):(s=qe(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){s&&s.d(e),e&&f(t)}}}function He(e){let t,n,s,i,r,l,o,c,u,p,$,E,v,N,y,O;t=new ce({});let R=!0===e[0].self.firstUser&&Ce(e),_=e[0].status===se.CONNECTED&&xe(e),C=e[4],w=[];for(let t=0;t<C.length;t+=1)w[t]=De(_e(e,C,t));const x=[ke,Se,Le,Te],D=[];function T(e,t){return e[0].status===se.SETUP?0:e[0].status===se.ERROR?1:e[0].status===se.READY?2:e[0].status===se.CONNECTED?3:-1}return~(p=T(e))&&($=D[p]=x[p](e)),y=new ae({}),{c(){H(t.$$.fragment),n=g(),s=m("div"),R&&R.c(),i=g(),_&&_.c(),r=g(),l=m("div");for(let e=0;e<w.length;e+=1)w[e].c();o=g(),c=m("main"),u=m("div"),$&&$.c(),E=g(),v=m("div"),v.innerHTML='<img class="imagepreload svelte-1ql1f5i" src="img/1.gif" alt=""/> \n\t\t<img class="imagepreload svelte-1ql1f5i" src="img/2.gif" alt=""/> \n\t\t<img class="imagepreload svelte-1ql1f5i" src="img/3.gif" alt=""/> \n\t\t<img class="imagepreload svelte-1ql1f5i" src="img/4.gif" alt=""/> \n\t\t<img class="imagepreload svelte-1ql1f5i" src="img/5.gif" alt=""/> \n\t\t<img class="imagepreload svelte-1ql1f5i" src="img/6.gif" alt=""/>',N=g(),H(y.$$.fragment),b(s,"class","setting svelte-1ql1f5i"),b(l,"class","eventlog svelte-1ql1f5i"),b(u,"class","gamearea svelte-1ql1f5i"),b(c,"class","svelte-1ql1f5i")},m(e,f){P(t,e,f),d(e,n,f),d(e,s,f),R&&R.m(s,null),a(s,i),_&&_.m(s,null),d(e,r,f),d(e,l,f);for(let e=0;e<w.length;e+=1)w[e].m(l,null);d(e,o,f),d(e,c,f),a(c,u),~p&&D[p].m(u,null),a(c,E),a(c,v),d(e,N,f),P(y,e,f),O=!0},p(e,[t]){if(!0===e[0].self.firstUser?R?(R.p(e,t),1&t&&z(R,1)):(R=Ce(e),R.c(),z(R,1),R.m(s,i)):R&&(K(),F(R,1,1,(()=>{R=null})),W()),e[0].status===se.CONNECTED?_?_.p(e,t):(_=xe(e),_.c(),_.m(s,null)):_&&(_.d(1),_=null),16&t){let n;for(C=e[4],n=0;n<C.length;n+=1){const s=_e(e,C,n);w[n]?w[n].p(s,t):(w[n]=De(s),w[n].c(),w[n].m(l,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=C.length}let n=p;p=T(e),p===n?~p&&D[p].p(e,t):($&&(K(),F(D[n],1,1,(()=>{D[n]=null})),W()),~p?($=D[p],$?$.p(e,t):($=D[p]=x[p](e),$.c()),z($,1),$.m(u,null)):$=null)},i(e){O||(z(t.$$.fragment,e),z(R),z($),z(y.$$.fragment,e),O=!0)},o(e){F(t.$$.fragment,e),F(R),F($),F(y.$$.fragment,e),O=!1},d(e){V(t,e),e&&f(n),e&&f(s),R&&R.d(),_&&_.d(),e&&f(r),e&&f(l),h(w,e),e&&f(o),e&&f(c),~p&&D[p].d(),e&&f(N),V(y,e)}}}function Pe(e,t,n){let s={roomName:"",playerName:""};document.body.addEventListener("dice-pusher-updated",(()=>{n(0,l),console.log("Updated DicePusher")})),Y.listen(Z.ROLL_DICE,(e=>{n(2,o[e.dice]=e.eyes,o),console.log("Last Rolls: "+o);let t=l.userlist.find((t=>t.id===e.sender)).name,s="none";6===e.eyes&&(s="bold"),n(3,c[e.dice]=!0,c),u[e.dice]="inactive",window.setTimeout((()=>{u[e.dice]="active",n(3,c[e.dice]=!1,c),i(t+" hat eine "+e.eyes+" gewürfelt",s)}),3e3)})),Y.listen(Q.ROOM_USER_JOIN,(e=>{console.log("User Joined Room: "+e.info.name),console.log("Current users: "),i(e.info.name+" kommt in den Raum geschliddert")})),Y.listen(Q.ROOM_USER_LEAVE,(e=>{console.log("User Left Room: "+e.info.name),i(e.info.name+" ist gegangen... :( "),a.push(e.id),console.log("Missing dice: "+a)}));const i=(e,t)=>{let s=t||"none";d.unshift({id:d.length,message:e,style:s}),n(4,d)},r=e=>{c[e]||l.roll(e)};let l,o,c,u,a,d,f;return e.$$.update=()=>{3&e.$$.dirty&&n(5,f=l.dices.map(((e,t)=>{if(-1===a.indexOf(t)){let n={};return n.id=t,n.user=l.users[e],n.yourTurn=!1,n.user&&n.user.id===l.self.id&&(n.yourTurn=!0),n}})))},n(0,l=new ne({network:{authEndpoint:"//gheist.net/api/pusher/auth/generic/presence/1098358",appKey:"d209ebf4ad2e3647739c"}})),n(2,o=[1]),n(3,c=[]),u=[],n(1,a=[]),n(4,d=[]),[l,a,o,c,d,f,e=>{s=e.detail,console.log("User "+s.playerName+" is joining room "+s.roomName),i("Hallo "+s.playerName),l.joinRoom(s.roomName,s.playerName)},()=>{l.addDice(),o.push(1),i("Huch! Ein neuer Würfel!")},r,e=>r(e.id)]}return new class extends G{constructor(e){super(),B(this,e,Pe,He,r,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
